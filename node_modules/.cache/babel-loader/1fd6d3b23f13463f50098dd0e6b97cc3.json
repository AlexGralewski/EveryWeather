{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aleksander.DESKTOP-LAALHEM\\\\Desktop\\\\React\\\\weather-app\\\\src\\\\components\\\\WeatherApp.js\";\nimport React from \"react\";\nimport timestampToTime from \"../data/timestampToTime\";\nimport CurrentWeatherDisplay from \"./CurrentWeatherDisplay\";\nimport cities from \"../data/cities\";\n\nclass WeatherApp extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      lat: \"0\",\n      //latitude\n      long: \"0\",\n      //longitude\n      city: \"\",\n      //city of choice\n      country: \"\",\n      part: \"minutely,hourly\",\n      //Excludes parts of weather data. Available values: \"current\", \"minutely\", \"hourly\", \"daily\", \"alerts\". Seperated by comma without spaces\n      weatherApiKey: \"692d3bd12adf77c08728b7324d9f2b14\",\n      //API key for OpenWeatherMapAPI\n      weatherData: undefined,\n      //data pulled from weather API\n      locationApiKey: \"44f5f3ce977746e7ab89ddeae84b48d3\",\n      //API key for openCageData\n      locationData: undefined,\n      //data pulled from location API\n      currentDisplay: \"none\",\n      formsDisplay: \"flex\",\n      returnButtonDisplay: \"none\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleLatLongSubmit = this.handleLatLongSubmit.bind(this);\n    this.handleCitySubmit = this.handleCitySubmit.bind(this);\n    this.handlePositionSubmit = this.handlePositionSubmit.bind(this);\n    this.handleReturnButton = this.handleReturnButton.bind(this);\n  }\n\n  handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleLatLongSubmit(event) {\n    event.preventDefault(); //URL string for weather API\n\n    let weatherApiUrl = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + this.state.lat % 180 + \"&lon=\" + this.state.long % 180 + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey;\n    console.log(weatherApiUrl);\n    let locationApiUrl = \"https://api.opencagedata.com/geocode/v1/json?q=\" + this.state.lat % 180 + \"+\" + this.state.long % 180 + \"&key=\" + this.state.locationApiKey;\n    console.log(locationApiUrl); //fetch weather API\n\n    fetch(weatherApiUrl).then(response => response.json()).then(res => {\n      this.setState({\n        weatherData: res\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    fetch(locationApiUrl).then(response => response.json()).then(res => {\n      this.setState({\n        locationData: res\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    console.log(this.state.locationData);\n    this.setState({\n      currentDisplay: \"flex\",\n      formsDisplay: \"none\",\n      returnButtonDisplay: \"flex\"\n    });\n  }\n\n  handleCitySubmit(event) {\n    event.preventDefault();\n    let cityIndex;\n\n    for (cityIndex = 0; cityIndex < cities.length; cityIndex++) {\n      if (cities[cityIndex].city === \"warsaw\") {\n        this.setState({\n          lat: cities[cityIndex].lat,\n          long: cities[cityIndex].long\n        });\n      }\n    } //URL string for weather API\n\n\n    let apiURL = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + this.state.lat % 90 + \"&lon=\" + this.state.long % 180 + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey;\n    console.log(apiURL); //fetch API\n\n    fetch(apiURL).then(response => response.json()).then(res => {\n      this.setState({\n        data: res\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  handlePositionSubmit() {\n    navigator.geolocation.getCurrentPosition(position => {\n      this.setState({\n        lat: Math.round(position.coords.latitude * 1000) / 1000,\n        long: Math.round(position.coords.longitude * 1000) / 1000,\n        formsDisplay: \"none\",\n        currentDisplay: \"block\",\n        returnButtonDisplay: \"flex\"\n      }, this.handlePositionSubmit1);\n    });\n  }\n\n  handlePositionSubmit1() {\n    let weatherApiUrl = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + this.state.lat % 90 + \"&lon=\" + this.state.long % 180 + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey;\n    fetch(weatherApiUrl).then(response => response.json()).then(res => {\n      this.setState({\n        weatherData: res\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    console.log(weatherApiUrl);\n  }\n\n  handleReturnButton(event) {\n    this.setState({\n      formsDisplay: \"flex\",\n      currentDisplay: \"none\",\n      returnButtonDisplay: \"none\"\n    });\n    event.preventDefault();\n  }\n\n  render() {\n    const {\n      city,\n      lat,\n      long,\n      weatherData,\n      locationData,\n      currentDisplay,\n      formsDisplay,\n      returnButtonDisplay\n    } = this.state;\n    let currentWeather = {}; //assigning weather parameters\n\n    if (weatherData !== undefined) {\n      //sets current temperature\n      currentWeather.temp = Math.round(weatherData.current.temp - 273.15); //sets current sunrise and sunset\n\n      currentWeather.sunrise = timestampToTime(weatherData.current.sunrise);\n      currentWeather.sunset = timestampToTime(weatherData.current.sunset); //sets current weather parameters\n\n      currentWeather.description = weatherData.current.weather[0].description;\n      currentWeather.iconId = weatherData.current.weather[0].icon;\n      currentWeather.pressure = weatherData.current.pressure;\n      currentWeather.humidity = weatherData.current.humidity;\n      currentWeather.wind = [weatherData.current.wind_deg, weatherData.current.wind_speed];\n    }\n\n    console.log(currentWeather);\n\n    if (locationData !== undefined) {\n      const cityL = locationData.results[0].components.city;\n      const countryL = locationData.results[0].components.country;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"weather-app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"forms\",\n      style: {\n        display: formsDisplay\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"lat-long-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleLatLongSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 15\n      }\n    }, \"Enter latitude:\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 32\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      step: \"0.001\",\n      name: \"lat\",\n      value: lat,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    }, \"Enter longitude: \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 34\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      step: \"0.001\",\n      name: \"long\",\n      value: long,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, \"Get current weather\"))), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }\n    }, \"OR\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"city-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleCitySubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }, \"Enter a name of a city:\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"city-country-inputs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"city\",\n      value: city,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"select\", {\n      value: this.state.country,\n      name: \"country\",\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 19\n      }\n    }, \"Country\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"poland\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 19\n      }\n    }, \"Poland\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"england\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 19\n      }\n    }, \"England\"))), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }\n    }, \"Get current weather\"))), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }\n    }, \"OR\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"this-location-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handlePositionSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }, \"Get current weather for your position\"))), /*#__PURE__*/React.createElement(CurrentWeatherDisplay, {\n      city: city,\n      lat: lat,\n      long: long,\n      currentDisplay: currentDisplay,\n      currentWeather: currentWeather,\n      currentTemp: currentWeather.temp,\n      currentDescription: currentWeather.description,\n      currentIconId: currentWeather.iconId,\n      currentSunrise: currentWeather.sunrise,\n      currentSunset: currentWeather.sunset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleReturnButton,\n      style: {\n        display: returnButtonDisplay\n      },\n      className: \"return-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-arrow-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 46\n      }\n    }, \"Return\")));\n  }\n\n}\n\nexport default WeatherApp;","map":{"version":3,"sources":["C:/Users/Aleksander.DESKTOP-LAALHEM/Desktop/React/weather-app/src/components/WeatherApp.js"],"names":["React","timestampToTime","CurrentWeatherDisplay","cities","WeatherApp","Component","constructor","state","lat","long","city","country","part","weatherApiKey","weatherData","undefined","locationApiKey","locationData","currentDisplay","formsDisplay","returnButtonDisplay","handleChange","bind","handleLatLongSubmit","handleCitySubmit","handlePositionSubmit","handleReturnButton","event","name","value","target","setState","preventDefault","weatherApiUrl","console","log","locationApiUrl","fetch","then","response","json","res","catch","err","cityIndex","length","apiURL","data","navigator","geolocation","getCurrentPosition","position","Math","round","coords","latitude","longitude","handlePositionSubmit1","render","currentWeather","temp","current","sunrise","sunset","description","weather","iconId","icon","pressure","humidity","wind","wind_deg","wind_speed","cityL","results","components","countryL","display"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,eAAP,MAA4B,yBAA5B;AACA,OAAOC,qBAAP,MAAkC,yBAAlC;AACA,OAAOC,MAAP,MAAmB,gBAAnB;;AAEA,MAAMC,UAAN,SAAyBJ,KAAK,CAACK,SAA/B,CAAyC;AACvCC,EAAAA,WAAW,GAAG;AACZ;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,GAAG,EAAE,GADM;AACD;AACVC,MAAAA,IAAI,EAAE,GAFK;AAEA;AACXC,MAAAA,IAAI,EAAE,EAHK;AAGD;AACVC,MAAAA,OAAO,EAAE,EAJE;AAKXC,MAAAA,IAAI,EAAE,iBALK;AAKc;AACzBC,MAAAA,aAAa,EAAE,kCANJ;AAMwC;AACnDC,MAAAA,WAAW,EAAEC,SAPF;AAOa;AACxBC,MAAAA,cAAc,EAAE,kCARL;AAQyC;AACpDC,MAAAA,YAAY,EAAEF,SATH;AASc;AACzBG,MAAAA,cAAc,EAAE,MAVL;AAWXC,MAAAA,YAAY,EAAE,MAXH;AAYXC,MAAAA,mBAAmB,EAAE;AAZV,KAAb;AAcA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBD,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKE,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBF,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKG,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BH,IAA1B,CAA+B,IAA/B,CAA5B;AACA,SAAKI,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBJ,IAAxB,CAA6B,IAA7B,CAA1B;AACD;;AAGDD,EAAAA,YAAY,CAACM,KAAD,EAAQ;AAClB,UAAM;AAACC,MAAAA,IAAD;AAAOC,MAAAA;AAAP,QAAgBF,KAAK,CAACG,MAA5B;AACA,SAAKC,QAAL,CAAc;AACZ,OAACH,IAAD,GAAQC;AADI,KAAd;AAGD;;AAEDN,EAAAA,mBAAmB,CAACI,KAAD,EAAQ;AACzBA,IAAAA,KAAK,CAACK,cAAN,GADyB,CAGzB;;AACA,QAAIC,aAAa,GAAG,yDAA0D,KAAK1B,KAAL,CAAWC,GAAX,GAAiB,GAA3E,GAAkF,OAAlF,GAA6F,KAAKD,KAAL,CAAWE,IAAX,GAAkB,GAA/G,GAAsH,WAAtH,GAAoI,KAAKF,KAAL,CAAWK,IAA/I,GAAsJ,SAAtJ,GAAkK,KAAKL,KAAL,CAAWM,aAAjM;AACAqB,IAAAA,OAAO,CAACC,GAAR,CAAYF,aAAZ;AACA,QAAIG,cAAc,GAAG,oDAAqD,KAAK7B,KAAL,CAAWC,GAAX,GAAiB,GAAtE,GAA6E,GAA7E,GAAoF,KAAKD,KAAL,CAAWE,IAAX,GAAkB,GAAtG,GAA6G,OAA7G,GAAwH,KAAKF,KAAL,CAAWS,cAAxJ;AACAkB,IAAAA,OAAO,CAACC,GAAR,CAAYC,cAAZ,EAPyB,CAQzB;;AACAC,IAAAA,KAAK,CAACJ,aAAD,CAAL,CACGK,IADH,CACQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADpB,EAEGF,IAFH,CAEQG,GAAG,IAAI;AACX,WAAKV,QAAL,CAAc;AAACjB,QAAAA,WAAW,EAAE2B;AAAd,OAAd;AACD,KAJH,EAKGC,KALH,CAKSC,GAAG,IAAI;AACZT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,GAAZ;AACD,KAPH;AASAN,IAAAA,KAAK,CAACD,cAAD,CAAL,CACGE,IADH,CACQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADpB,EAEGF,IAFH,CAEQG,GAAG,IAAI;AACX,WAAKV,QAAL,CAAc;AAACd,QAAAA,YAAY,EAAEwB;AAAf,OAAd;AACD,KAJH,EAKGC,KALH,CAKSC,GAAG,IAAI;AACZT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,GAAZ;AACD,KAPH;AASAT,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK5B,KAAL,CAAWU,YAAvB;AACA,SAAKc,QAAL,CAAc;AACZb,MAAAA,cAAc,EAAE,MADJ;AAEZC,MAAAA,YAAY,EAAE,MAFF;AAGZC,MAAAA,mBAAmB,EAAE;AAHT,KAAd;AAKD;;AAIDI,EAAAA,gBAAgB,CAACG,KAAD,EAAQ;AACtBA,IAAAA,KAAK,CAACK,cAAN;AAEA,QAAIY,SAAJ;;AACA,SAAKA,SAAS,GAAG,CAAjB,EAAoBA,SAAS,GAAGzC,MAAM,CAAC0C,MAAvC,EAA+CD,SAAS,EAAxD,EAA4D;AAC1D,UAAIzC,MAAM,CAACyC,SAAD,CAAN,CAAkBlC,IAAlB,KAA2B,QAA/B,EAAyC;AACvC,aAAKqB,QAAL,CAAc;AACZvB,UAAAA,GAAG,EAAEL,MAAM,CAACyC,SAAD,CAAN,CAAkBpC,GADX;AAEZC,UAAAA,IAAI,EAAEN,MAAM,CAACyC,SAAD,CAAN,CAAkBnC;AAFZ,SAAd;AAID;AACF,KAXqB,CAatB;;;AACA,QAAIqC,MAAM,GAAG,yDAA0D,KAAKvC,KAAL,CAAWC,GAAX,GAAiB,EAA3E,GAAiF,OAAjF,GAA4F,KAAKD,KAAL,CAAWE,IAAX,GAAkB,GAA9G,GAAqH,WAArH,GAAmI,KAAKF,KAAL,CAAWK,IAA9I,GAAqJ,SAArJ,GAAiK,KAAKL,KAAL,CAAWM,aAAzL;AACAqB,IAAAA,OAAO,CAACC,GAAR,CAAYW,MAAZ,EAfsB,CAiBtB;;AACAT,IAAAA,KAAK,CAACS,MAAD,CAAL,CACGR,IADH,CACQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADpB,EAEGF,IAFH,CAEQG,GAAG,IAAI;AACX,WAAKV,QAAL,CAAc;AAACgB,QAAAA,IAAI,EAAEN;AAAP,OAAd;AACD,KAJH,EAKGC,KALH,CAKSC,GAAG,IAAI;AACZT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,GAAZ;AACD,KAPH;AAQD;;AAEDlB,EAAAA,oBAAoB,GAAG;AAErBuB,IAAAA,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyCC,QAAQ,IAAI;AACnD,WAAKpB,QAAL,CAAc;AACZvB,QAAAA,GAAG,EAAE4C,IAAI,CAACC,KAAL,CAAWF,QAAQ,CAACG,MAAT,CAAgBC,QAAhB,GAA2B,IAAtC,IAA8C,IADvC;AAEZ9C,QAAAA,IAAI,EAAE2C,IAAI,CAACC,KAAL,CAAWF,QAAQ,CAACG,MAAT,CAAgBE,SAAhB,GAA2B,IAAtC,IAA8C,IAFxC;AAGZrC,QAAAA,YAAY,EAAE,MAHF;AAIZD,QAAAA,cAAc,EAAE,OAJJ;AAKZE,QAAAA,mBAAmB,EAAE;AALT,OAAd,EAMG,KAAKqC,qBANR;AAOD,KARD;AASD;;AAEDA,EAAAA,qBAAqB,GAAG;AACtB,QAAIxB,aAAa,GAAG,yDAA0D,KAAK1B,KAAL,CAAWC,GAAX,GAAiB,EAA3E,GAAiF,OAAjF,GAA4F,KAAKD,KAAL,CAAWE,IAAX,GAAkB,GAA9G,GAAqH,WAArH,GAAmI,KAAKF,KAAL,CAAWK,IAA9I,GAAqJ,SAArJ,GAAiK,KAAKL,KAAL,CAAWM,aAAhM;AAEAwB,IAAAA,KAAK,CAACJ,aAAD,CAAL,CACGK,IADH,CACQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADpB,EAEGF,IAFH,CAEQG,GAAG,IAAI;AACX,WAAKV,QAAL,CAAc;AAACjB,QAAAA,WAAW,EAAE2B;AAAd,OAAd;AACD,KAJH,EAKGC,KALH,CAKSC,GAAG,IAAI;AACZT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,GAAZ;AACD,KAPH;AASAT,IAAAA,OAAO,CAACC,GAAR,CAAYF,aAAZ;AACD;;AAEDP,EAAAA,kBAAkB,CAACC,KAAD,EAAQ;AACxB,SAAKI,QAAL,CAAc;AACZZ,MAAAA,YAAY,EAAE,MADF;AAEZD,MAAAA,cAAc,EAAE,MAFJ;AAGZE,MAAAA,mBAAmB,EAAE;AAHT,KAAd;AAKAO,IAAAA,KAAK,CAACK,cAAN;AAGD;;AAED0B,EAAAA,MAAM,GAAG;AACP,UAAM;AAAChD,MAAAA,IAAD;AAAOF,MAAAA,GAAP;AAAYC,MAAAA,IAAZ;AAAkBK,MAAAA,WAAlB;AAA+BG,MAAAA,YAA/B;AAA6CC,MAAAA,cAA7C;AAA6DC,MAAAA,YAA7D;AAA2EC,MAAAA;AAA3E,QAAkG,KAAKb,KAA7G;AACA,QAAIoD,cAAc,GAAG,EAArB,CAFO,CAIP;;AACA,QAAI7C,WAAW,KAAKC,SAApB,EAA+B;AAC7B;AACA4C,MAAAA,cAAc,CAACC,IAAf,GAAsBR,IAAI,CAACC,KAAL,CAAWvC,WAAW,CAAC+C,OAAZ,CAAoBD,IAApB,GAA2B,MAAtC,CAAtB,CAF6B,CAG7B;;AACAD,MAAAA,cAAc,CAACG,OAAf,GAAyB7D,eAAe,CAACa,WAAW,CAAC+C,OAAZ,CAAoBC,OAArB,CAAxC;AACAH,MAAAA,cAAc,CAACI,MAAf,GAAwB9D,eAAe,CAACa,WAAW,CAAC+C,OAAZ,CAAoBE,MAArB,CAAvC,CAL6B,CAM7B;;AACAJ,MAAAA,cAAc,CAACK,WAAf,GAA6BlD,WAAW,CAAC+C,OAAZ,CAAoBI,OAApB,CAA4B,CAA5B,EAA+BD,WAA5D;AACAL,MAAAA,cAAc,CAACO,MAAf,GAAwBpD,WAAW,CAAC+C,OAAZ,CAAoBI,OAApB,CAA4B,CAA5B,EAA+BE,IAAvD;AACAR,MAAAA,cAAc,CAACS,QAAf,GAA0BtD,WAAW,CAAC+C,OAAZ,CAAoBO,QAA9C;AACAT,MAAAA,cAAc,CAACU,QAAf,GAA0BvD,WAAW,CAAC+C,OAAZ,CAAoBQ,QAA9C;AACAV,MAAAA,cAAc,CAACW,IAAf,GAAsB,CAACxD,WAAW,CAAC+C,OAAZ,CAAoBU,QAArB,EAA+BzD,WAAW,CAAC+C,OAAZ,CAAoBW,UAAnD,CAAtB;AAGD;;AACDtC,IAAAA,OAAO,CAACC,GAAR,CAAYwB,cAAZ;;AAEA,QAAI1C,YAAY,KAAKF,SAArB,EAAgC;AAC5B,YAAM0D,KAAK,GAAGxD,YAAY,CAACyD,OAAb,CAAqB,CAArB,EAAwBC,UAAxB,CAAmCjE,IAAjD;AACA,YAAMkE,QAAQ,GAAG3D,YAAY,CAACyD,OAAb,CAAqB,CAArB,EAAwBC,UAAxB,CAAmChE,OAApD;AAED;;AAGH,wBACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAuB,MAAA,KAAK,EAAE;AAACkE,QAAAA,OAAO,EAAC1D;AAAT,OAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,QAAQ,EAAE,KAAKI,mBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCACiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADjB,eAEE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,IAAI,EAAC,OAFP;AAGE,MAAA,IAAI,EAAC,KAHP;AAIE,MAAA,KAAK,EAAEf,GAJT;AAKE,MAAA,QAAQ,EAAE,KAAKa,YALjB;AAME,MAAA,QAAQ,MANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCACmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADnB,eAEE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,IAAI,EAAC,OAFP;AAGE,MAAA,IAAI,EAAC,MAHP;AAIE,MAAA,KAAK,EAAEZ,IAJT;AAKE,MAAA,QAAQ,EAAE,KAAKY,YALjB;AAME,MAAA,QAAQ,MANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAXF,eAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BArBF,CADF,CADF,eA0BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YA1BF,eA2BE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,QAAQ,EAAE,KAAKG,gBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADA,eAIE;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,KAAK,EAAId,IAHX;AAIE,MAAA,QAAQ,EAAE,KAAKW,YAJjB;AAKE,MAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAOE;AACE,MAAA,KAAK,EAAE,KAAKd,KAAL,CAAWI,OADpB;AAEE,MAAA,IAAI,EAAC,SAFP;AAGE,MAAA,QAAQ,EAAI,KAAKU,YAHnB;AAIE,MAAA,QAAQ,MAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AAAQ,MAAA,KAAK,EAAC,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALF,eAME;AAAQ,MAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANF,eAOE;AAAQ,MAAA,KAAK,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAPF,CAPF,CAJF,eAqBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BArBA,CADF,CA3BF,eAoDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YApDF,eAqDE;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAQ,MAAA,OAAO,EAAE,KAAKI,oBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CADF,CArDF,CADF,eA2DE,oBAAC,qBAAD;AACE,MAAA,IAAI,EAAEf,IADR;AAEE,MAAA,GAAG,EAAEF,GAFP;AAGE,MAAA,IAAI,EAAEC,IAHR;AAIE,MAAA,cAAc,EAAIS,cAJpB;AAKE,MAAA,cAAc,EAAIyC,cALpB;AAME,MAAA,WAAW,EAAIA,cAAc,CAACC,IANhC;AAOE,MAAA,kBAAkB,EAAID,cAAc,CAACK,WAPvC;AAQE,MAAA,aAAa,EAAIL,cAAc,CAACO,MARlC;AASE,MAAA,cAAc,EAAIP,cAAc,CAACG,OATnC;AAUE,MAAA,aAAa,EAAIH,cAAc,CAACI,MAVlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3DF,eAuEE;AACE,MAAA,OAAO,EAAE,KAAKrC,kBADhB;AAEE,MAAA,KAAK,EAAE;AAACmD,QAAAA,OAAO,EAACzD;AAAT,OAFT;AAGE,MAAA,SAAS,EAAC,eAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAII;AAAG,MAAA,KAAK,EAAC,mBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,eAIqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJrC,CAvEF,CADF;AAgFD;;AArPsC;;AAwPzC,eAAehB,UAAf","sourcesContent":["import React from \"react\"\r\nimport timestampToTime from \"../data/timestampToTime\"\r\nimport CurrentWeatherDisplay from \"./CurrentWeatherDisplay\"\r\nimport cities from \"../data/cities\"\r\n\r\nclass WeatherApp extends React.Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      lat: \"0\", //latitude\r\n      long: \"0\", //longitude\r\n      city: \"\", //city of choice\r\n      country: \"\",\r\n      part: \"minutely,hourly\", //Excludes parts of weather data. Available values: \"current\", \"minutely\", \"hourly\", \"daily\", \"alerts\". Seperated by comma without spaces\r\n      weatherApiKey: \"692d3bd12adf77c08728b7324d9f2b14\", //API key for OpenWeatherMapAPI\r\n      weatherData: undefined, //data pulled from weather API\r\n      locationApiKey: \"44f5f3ce977746e7ab89ddeae84b48d3\", //API key for openCageData\r\n      locationData: undefined, //data pulled from location API\r\n      currentDisplay: \"none\",\r\n      formsDisplay: \"flex\",\r\n      returnButtonDisplay: \"none\"\r\n    }\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleLatLongSubmit = this.handleLatLongSubmit.bind(this)\r\n    this.handleCitySubmit = this.handleCitySubmit.bind(this)\r\n    this.handlePositionSubmit = this.handlePositionSubmit.bind(this)\r\n    this.handleReturnButton = this.handleReturnButton.bind(this)\r\n  }\r\n\r\n\r\n  handleChange(event) {\r\n    const {name, value} = event.target\r\n    this.setState({\r\n      [name]: value\r\n    })\r\n  }\r\n\r\n  handleLatLongSubmit(event) {\r\n    event.preventDefault()\r\n\r\n    //URL string for weather API\r\n    let weatherApiUrl = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + (this.state.lat % 180) + \"&lon=\" + (this.state.long % 180) + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey   \r\n    console.log(weatherApiUrl)\r\n    let locationApiUrl = \"https://api.opencagedata.com/geocode/v1/json?q=\" + (this.state.lat % 180) + \"+\" + (this.state.long % 180) + \"&key=\"  + this.state.locationApiKey  \r\n    console.log(locationApiUrl)\r\n    //fetch weather API\r\n    fetch(weatherApiUrl)\r\n      .then(response => response.json())\r\n      .then(res => {\r\n        this.setState({weatherData: res})\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n    \r\n    fetch(locationApiUrl)\r\n      .then(response => response.json())\r\n      .then(res => {\r\n        this.setState({locationData: res})\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })      \r\n\r\n    console.log(this.state.locationData)\r\n    this.setState({\r\n      currentDisplay: \"flex\",\r\n      formsDisplay: \"none\",\r\n      returnButtonDisplay: \"flex\"\r\n    })\r\n  }\r\n\r\n\r\n\r\n  handleCitySubmit(event) {\r\n    event.preventDefault()\r\n    \r\n    let cityIndex\r\n    for (cityIndex = 0; cityIndex < cities.length; cityIndex++) {\r\n      if (cities[cityIndex].city === \"warsaw\") {\r\n        this.setState({\r\n          lat: cities[cityIndex].lat,\r\n          long: cities[cityIndex].long\r\n        })\r\n      }\r\n    }\r\n\r\n    //URL string for weather API\r\n    let apiURL = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + (this.state.lat % 90) + \"&lon=\" + (this.state.long % 180) + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey\r\n    console.log(apiURL)\r\n\r\n    //fetch API\r\n    fetch(apiURL)\r\n      .then(response => response.json())\r\n      .then(res => {\r\n        this.setState({data: res});\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });   \r\n  }\r\n\r\n  handlePositionSubmit() {\r\n\r\n    navigator.geolocation.getCurrentPosition(position => {\r\n      this.setState({\r\n        lat: Math.round(position.coords.latitude * 1000) / 1000,\r\n        long: Math.round(position.coords.longitude *1000) / 1000,\r\n        formsDisplay: \"none\",\r\n        currentDisplay: \"block\",\r\n        returnButtonDisplay: \"flex\"\r\n      }, this.handlePositionSubmit1)\r\n    })\r\n  }\r\n\r\n  handlePositionSubmit1() {\r\n    let weatherApiUrl = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + (this.state.lat % 90) + \"&lon=\" + (this.state.long % 180) + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey   \r\n\r\n    fetch(weatherApiUrl)\r\n      .then(response => response.json())\r\n      .then(res => {\r\n        this.setState({weatherData: res})\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n\r\n    console.log(weatherApiUrl)\r\n  }\r\n\r\n  handleReturnButton(event) {\r\n    this.setState({\r\n      formsDisplay: \"flex\",\r\n      currentDisplay: \"none\",\r\n      returnButtonDisplay: \"none\"\r\n    })\r\n    event.preventDefault()\r\n\r\n    \r\n  }\r\n\r\n  render() {\r\n    const {city, lat, long, weatherData, locationData, currentDisplay, formsDisplay, returnButtonDisplay} = this.state\r\n    let currentWeather = {}\r\n    \r\n    //assigning weather parameters\r\n    if (weatherData !== undefined) {\r\n      //sets current temperature\r\n      currentWeather.temp = Math.round(weatherData.current.temp - 273.15)\r\n      //sets current sunrise and sunset\r\n      currentWeather.sunrise = timestampToTime(weatherData.current.sunrise)\r\n      currentWeather.sunset = timestampToTime(weatherData.current.sunset)\r\n      //sets current weather parameters\r\n      currentWeather.description = weatherData.current.weather[0].description\r\n      currentWeather.iconId = weatherData.current.weather[0].icon\r\n      currentWeather.pressure = weatherData.current.pressure\r\n      currentWeather.humidity = weatherData.current.humidity\r\n      currentWeather.wind = [weatherData.current.wind_deg, weatherData.current.wind_speed]\r\n\r\n      \r\n    } \r\n    console.log(currentWeather)\r\n\r\n    if (locationData !== undefined) {\r\n        const cityL = locationData.results[0].components.city\r\n        const countryL = locationData.results[0].components.country\r\n\r\n      }\r\n\r\n\r\n    return (\r\n      <div className=\"weather-app\">\r\n        <div className=\"forms\" style={{display:formsDisplay}}>\r\n          <div className=\"lat-long-form\">\r\n            <form onSubmit={this.handleLatLongSubmit}>\r\n              <label>\r\n                Enter latitude:<br />\r\n                <input \r\n                  type=\"number\"\r\n                  step=\"0.001\"\r\n                  name=\"lat\"\r\n                  value={lat}\r\n                  onChange={this.handleChange}\r\n                  required/> \r\n              </label>\r\n              <label>\r\n                Enter longitude: <br />\r\n                <input \r\n                  type=\"number\"\r\n                  step=\"0.001\"\r\n                  name=\"long\"\r\n                  value={long}\r\n                  onChange={this.handleChange}\r\n                  required/> \r\n              </label>\r\n              <button>Get current weather</button>\r\n            </form>\r\n          </div>\r\n          <h1>OR</h1>\r\n          <div className=\"city-form\">\r\n            <form onSubmit={this.handleCitySubmit}>\r\n            <label>\r\n              Enter a name of a city:\r\n            </label>\r\n              <div className=\"city-country-inputs\">\r\n                <input \r\n                  type=\"text\"\r\n                  name=\"city\"\r\n                  value = {city}\r\n                  onChange={this.handleChange}\r\n                  required/> \r\n                <select\r\n                  value={this.state.country}\r\n                  name=\"country\"\r\n                  onChange = {this.handleChange}\r\n                  required>\r\n                  <option value=\"\">Country</option>\r\n                  <option value=\"poland\">Poland</option>\r\n                  <option value=\"england\">England</option>\r\n                </select>\r\n              </div>\r\n            <button>Get current weather</button>\r\n          </form>\r\n          </div>\r\n          <h1>OR</h1>\r\n          <div className=\"this-location-form\">\r\n            <button onClick={this.handlePositionSubmit}>Get current weather for your position</button>          \r\n          </div>\r\n        </div>\r\n\r\n        <CurrentWeatherDisplay \r\n          city={city}\r\n          lat={lat}\r\n          long={long}\r\n          currentDisplay = {currentDisplay}\r\n          currentWeather = {currentWeather}\r\n          currentTemp = {currentWeather.temp}\r\n          currentDescription = {currentWeather.description}\r\n          currentIconId = {currentWeather.iconId}\r\n          currentSunrise = {currentWeather.sunrise}\r\n          currentSunset = {currentWeather.sunset}\r\n          />\r\n        <button \r\n          onClick={this.handleReturnButton} \r\n          style={{display:returnButtonDisplay}} \r\n          className=\"return-button\">\r\n            <i class=\"fas fa-arrow-left\"></i><p>Return</p>\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default WeatherApp"]},"metadata":{},"sourceType":"module"}