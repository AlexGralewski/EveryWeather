{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aleksander.DESKTOP-LAALHEM\\\\Desktop\\\\React\\\\weather-app\\\\src\\\\components\\\\WeatherApp.js\";\nimport React from \"react\";\nimport timestampToTime from \"../data/timestampToTime\";\nimport CurrentWeatherDisplay from \"./CurrentWeatherDisplay\";\nimport cities from \"../data/cities\";\n\nclass WeatherApp extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      lat: \"52.24\",\n      //latitude\n      long: \"21.02\",\n      //longitude\n      city: \"\",\n      //city of choice\n      country: \"\",\n      part: \"minutely,hourly\",\n      //Excludes parts of weather data. Available values: \"current\", \"minutely\", \"hourly\", \"daily\", \"alerts\". Seperated by comma without spaces\n      weatherApiKey: \"692d3bd12adf77c08728b7324d9f2b14\",\n      //API key for OpenWeatherMapAPI\n      weatherData: undefined,\n      //data pulled from weather API\n      locationApiKey: \"44f5f3ce977746e7ab89ddeae84b48d3\",\n      //API key for openCageData\n      locationData: undefined,\n      //data pulled from location API\n      currentDisplay: \"none\",\n      formsDisplay: \"flex\",\n      returnButtonDisplay: \"none\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleLatLongSubmit = this.handleLatLongSubmit.bind(this);\n    this.handleCitySubmit = this.handleCitySubmit.bind(this);\n    this.handlePositionSubmit = this.handlePositionSubmit.bind(this);\n    this.handleReturnButton = this.handleReturnButton.bind(this);\n  }\n\n  handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleLatLongSubmit(event) {\n    event.preventDefault(); //URL string for weather API\n\n    let weatherApiUrl = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + this.state.lat % 180 + \"&lon=\" + this.state.long % 180 + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey;\n    console.log(weatherApiUrl);\n    let locationApiUrl = \"https://api.opencagedata.com/geocode/v1/json?q=\" + this.state.lat % 180 + \"+\" + this.state.long % 180 + \"&key=\" + this.state.locationApiKey;\n    console.log(locationApiUrl); //fetch weather API\n\n    fetch(weatherApiUrl).then(response => response.json()).then(res => {\n      this.setState({\n        weatherData: res\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    fetch(locationApiUrl).then(response => response.json()).then(res => {\n      this.setState({\n        locationData: res\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    console.log(this.state.locationData);\n    this.setState({\n      currentDisplay: \"flex\",\n      formsDisplay: \"none\"\n    });\n  }\n\n  handleCitySubmit(event) {\n    event.preventDefault();\n    let cityIndex;\n\n    for (cityIndex = 0; cityIndex < cities.length; cityIndex++) {\n      if (cities[cityIndex].city === \"warsaw\") {\n        this.setState({\n          lat: cities[cityIndex].lat,\n          long: cities[cityIndex].long\n        });\n      }\n    } //URL string for weather API\n\n\n    let apiURL = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + this.state.lat % 90 + \"&lon=\" + this.state.long % 180 + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey;\n    console.log(apiURL); //fetch API\n\n    fetch(apiURL).then(response => response.json()).then(res => {\n      this.setState({\n        data: res\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  handlePositionSubmit(event) {\n    event.preventDefault();\n    const position = navigator.geolocation.getCurrentPosition(position => {\n      this.setState({\n        lat: Math.round(position.coords.latitude * 1000) / 1000,\n        long: Math.round(position.coords.longitude * 1000) / 1000\n      });\n    });\n    let weatherApiUrl = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + this.state.lat % 90 + \"&lon=\" + this.state.long % 180 + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey;\n    console.log(weatherApiUrl);\n    fetch(weatherApiUrl).then(response => response.json()).then(res => {\n      this.setState({\n        weatherData: res\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n    console.log(weatherApiUrl);\n  }\n\n  handleReturnButton(event) {\n    console.log(\"ckicked\");\n    event.preventDefault();\n  }\n\n  render() {\n    const {\n      city,\n      lat,\n      long,\n      weatherData,\n      locationData,\n      currentDisplay,\n      formsDisplay,\n      returnButtonDisplay\n    } = this.state;\n    let current = {}; //assigning weather parameters\n\n    if (weatherData !== undefined) {\n      //set current temperature\n      current.temp = Math.round(weatherData.current.temp - 273.15); //set current sunrise and sunset\n\n      current.sunrise = timestampToTime(weatherData.current.sunrise);\n      current.sunset = timestampToTime(weatherData.current.sunset); //set current weather\n\n      current.description = weatherData.current.weather[0].description;\n      current.iconId = weatherData.current.weather[0].icon;\n    }\n\n    console.log(current);\n\n    if (locationData !== undefined) {\n      const cityL = locationData.results[0].components.city;\n      const countryL = locationData.results[0].components.country;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"weather-app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"forms\",\n      style: {\n        display: formsDisplay\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"lat-long-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleLatLongSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    }, \"Enter latitude:\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 32\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      step: \"0.001\",\n      name: \"lat\",\n      value: lat,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 15\n      }\n    }, \"Enter longitude: \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 34\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      step: \"0.001\",\n      name: \"long\",\n      value: long,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 15\n      }\n    }, \"Get current weather\"))), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, \"OR\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"city-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleCitySubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }\n    }, \"Enter a name of a city:\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"city-country-inputs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"city\",\n      value: city,\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"select\", {\n      value: this.state.country,\n      name: \"country\",\n      onChange: this.handleChange,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 19\n      }\n    }, \"Country\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"poland\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 19\n      }\n    }, \"Poland\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"england\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 19\n      }\n    }, \"England\"))), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, \"Get current weather\"))), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }, \"OR\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"this-location-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handlePositionSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, \"Get current weather from your location\"))), /*#__PURE__*/React.createElement(CurrentWeatherDisplay, {\n      city: city,\n      lat: lat,\n      long: long,\n      currentDisplay: currentDisplay,\n      currentTemp: current.temp,\n      currentDescription: current.description,\n      currentIconId: current.iconId,\n      currentSunrise: current.sunrise,\n      currentSunset: current.sunset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleReturnButton,\n      style: {\n        display: returnButtonDisplay\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }\n    }, \"Return\"));\n  }\n\n}\n\nexport default WeatherApp;","map":{"version":3,"sources":["C:/Users/Aleksander.DESKTOP-LAALHEM/Desktop/React/weather-app/src/components/WeatherApp.js"],"names":["React","timestampToTime","CurrentWeatherDisplay","cities","WeatherApp","Component","constructor","state","lat","long","city","country","part","weatherApiKey","weatherData","undefined","locationApiKey","locationData","currentDisplay","formsDisplay","returnButtonDisplay","handleChange","bind","handleLatLongSubmit","handleCitySubmit","handlePositionSubmit","handleReturnButton","event","name","value","target","setState","preventDefault","weatherApiUrl","console","log","locationApiUrl","fetch","then","response","json","res","catch","err","cityIndex","length","apiURL","data","position","navigator","geolocation","getCurrentPosition","Math","round","coords","latitude","longitude","render","current","temp","sunrise","sunset","description","weather","iconId","icon","cityL","results","components","countryL","display"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport timestampToTime from \"../data/timestampToTime\"\r\nimport CurrentWeatherDisplay from \"./CurrentWeatherDisplay\"\r\nimport cities from \"../data/cities\"\r\n\r\nclass WeatherApp extends React.Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      lat: \"52.24\", //latitude\r\n      long: \"21.02\", //longitude\r\n      city: \"\", //city of choice\r\n      country: \"\",\r\n      part: \"minutely,hourly\", //Excludes parts of weather data. Available values: \"current\", \"minutely\", \"hourly\", \"daily\", \"alerts\". Seperated by comma without spaces\r\n      weatherApiKey: \"692d3bd12adf77c08728b7324d9f2b14\", //API key for OpenWeatherMapAPI\r\n      weatherData: undefined, //data pulled from weather API\r\n      locationApiKey: \"44f5f3ce977746e7ab89ddeae84b48d3\", //API key for openCageData\r\n      locationData: undefined, //data pulled from location API\r\n      currentDisplay: \"none\",\r\n      formsDisplay: \"flex\",\r\n      returnButtonDisplay: \"none\"\r\n    }\r\n    this.handleChange = this.handleChange.bind(this)\r\n    this.handleLatLongSubmit = this.handleLatLongSubmit.bind(this)\r\n    this.handleCitySubmit = this.handleCitySubmit.bind(this)\r\n    this.handlePositionSubmit = this.handlePositionSubmit.bind(this)\r\n    this.handleReturnButton = this.handleReturnButton.bind(this)\r\n  }\r\n\r\n\r\n  handleChange(event) {\r\n    const {name, value} = event.target\r\n    this.setState({\r\n      [name]: value\r\n    })\r\n  }\r\n\r\n  handleLatLongSubmit(event) {\r\n    event.preventDefault()\r\n\r\n    //URL string for weather API\r\n    let weatherApiUrl = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + (this.state.lat % 180) + \"&lon=\" + (this.state.long % 180) + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey   \r\n    console.log(weatherApiUrl)\r\n    let locationApiUrl = \"https://api.opencagedata.com/geocode/v1/json?q=\" + (this.state.lat % 180) + \"+\" + (this.state.long % 180) + \"&key=\"  + this.state.locationApiKey  \r\n    console.log(locationApiUrl)\r\n    //fetch weather API\r\n    fetch(weatherApiUrl)\r\n      .then(response => response.json())\r\n      .then(res => {\r\n        this.setState({weatherData: res})\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n    \r\n    fetch(locationApiUrl)\r\n      .then(response => response.json())\r\n      .then(res => {\r\n        this.setState({locationData: res})\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })      \r\n\r\n    console.log(this.state.locationData)\r\n    this.setState({\r\n      currentDisplay: \"flex\",\r\n      formsDisplay: \"none\"\r\n    })\r\n  }\r\n\r\n\r\n\r\n  handleCitySubmit(event) {\r\n    event.preventDefault()\r\n    \r\n    let cityIndex\r\n    for (cityIndex = 0; cityIndex < cities.length; cityIndex++) {\r\n      if (cities[cityIndex].city === \"warsaw\") {\r\n        this.setState({\r\n          lat: cities[cityIndex].lat,\r\n          long: cities[cityIndex].long\r\n        })\r\n      }\r\n    }\r\n\r\n    //URL string for weather API\r\n    let apiURL = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + (this.state.lat % 90) + \"&lon=\" + (this.state.long % 180) + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey\r\n    console.log(apiURL)\r\n\r\n    //fetch API\r\n    fetch(apiURL)\r\n      .then(response => response.json())\r\n      .then(res => {\r\n        this.setState({data: res});\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });   \r\n  }\r\n\r\n  handlePositionSubmit(event) {\r\n    event.preventDefault()\r\n\r\n\r\n    const position = navigator.geolocation.getCurrentPosition(position => {\r\n      this.setState({\r\n        lat: Math.round(position.coords.latitude * 1000) / 1000,\r\n        long: Math.round(position.coords.longitude *1000) / 1000\r\n      })\r\n    })\r\n    let weatherApiUrl = \"https://api.openweathermap.org/data/2.5/onecall?lat=\" + (this.state.lat % 90) + \"&lon=\" + (this.state.long % 180) + \"&exclude=\" + this.state.part + \"&appid=\" + this.state.weatherApiKey   \r\n    console.log(weatherApiUrl)\r\n\r\n    fetch(weatherApiUrl)\r\n      .then(response => response.json())\r\n      .then(res => {\r\n        this.setState({weatherData: res})\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n\r\n    console.log(weatherApiUrl)\r\n  }\r\n\r\n  handleReturnButton(event) {\r\n    console.log(\"ckicked\")\r\n\r\n    event.preventDefault()\r\n\r\n    \r\n  }\r\n\r\n  render() {\r\n    const {city, lat, long, weatherData, locationData, currentDisplay, formsDisplay, returnButtonDisplay} = this.state\r\n    let current = {}\r\n    \r\n    //assigning weather parameters\r\n    if (weatherData !== undefined) {\r\n      //set current temperature\r\n      current.temp = Math.round(weatherData.current.temp - 273.15)\r\n      //set current sunrise and sunset\r\n      current.sunrise = timestampToTime(weatherData.current.sunrise)\r\n      current.sunset = timestampToTime(weatherData.current.sunset)\r\n      //set current weather\r\n      current.description = weatherData.current.weather[0].description\r\n      current.iconId = weatherData.current.weather[0].icon\r\n    } \r\n    console.log(current)\r\n\r\n    if (locationData !== undefined) {\r\n        const cityL = locationData.results[0].components.city\r\n        const countryL = locationData.results[0].components.country\r\n\r\n      }\r\n\r\n\r\n    return (\r\n      <div className=\"weather-app\">\r\n        <div className=\"forms\" style={{display:formsDisplay}}>\r\n          <div className=\"lat-long-form\">\r\n            <form onSubmit={this.handleLatLongSubmit}>\r\n              <label>\r\n                Enter latitude:<br />\r\n                <input \r\n                  type=\"number\"\r\n                  step=\"0.001\"\r\n                  name=\"lat\"\r\n                  value={lat}\r\n                  onChange={this.handleChange}\r\n                  required/> \r\n              </label>\r\n              <label>\r\n                Enter longitude: <br />\r\n                <input \r\n                  type=\"number\"\r\n                  step=\"0.001\"\r\n                  name=\"long\"\r\n                  value={long}\r\n                  onChange={this.handleChange}\r\n                  required/> \r\n              </label>\r\n              <button>Get current weather</button>\r\n            </form>\r\n          </div>\r\n          <h1>OR</h1>\r\n          <div className=\"city-form\">\r\n            <form onSubmit={this.handleCitySubmit}>\r\n            <label>\r\n              Enter a name of a city:\r\n            </label>\r\n              <div className=\"city-country-inputs\">\r\n                <input \r\n                  type=\"text\"\r\n                  name=\"city\"\r\n                  value = {city}\r\n                  onChange={this.handleChange}\r\n                  required/> \r\n                <select\r\n                  value={this.state.country}\r\n                  name=\"country\"\r\n                  onChange = {this.handleChange}\r\n                  required>\r\n                  <option value=\"\">Country</option>\r\n                  <option value=\"poland\">Poland</option>\r\n                  <option value=\"england\">England</option>\r\n                </select>\r\n              </div>\r\n            <button>Get current weather</button>\r\n          </form>\r\n          </div>\r\n          <h1>OR</h1>\r\n          <div className=\"this-location-form\">\r\n            <button onClick={this.handlePositionSubmit}>Get current weather from your location</button>          \r\n          </div>\r\n        </div>\r\n\r\n        <CurrentWeatherDisplay \r\n          city={city}\r\n          lat={lat}\r\n          long={long}\r\n          currentDisplay = {currentDisplay}\r\n          currentTemp = {current.temp}\r\n          currentDescription = {current.description}\r\n          currentIconId = {current.iconId}\r\n          currentSunrise = {current.sunrise}\r\n          currentSunset = {current.sunset}\r\n          />\r\n        <button onClick={this.handleReturnButton} style={{display:returnButtonDisplay}}>Return</button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default WeatherApp"]},"metadata":{},"sourceType":"module"}